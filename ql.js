// Generated by CoffeeScript 1.9.1
var _, builtin, fn1, fn2, fn3, fn4, i, len, name, ql, ref, ref1, ref2, ref3, source,
  slice = [].slice;

builtin = [require('./ops/boolean'), require('./ops/conditional'), require('./ops/maths'), require('./ops/transform')];

ql = function(_query, def) {
  var _, fn, fn1, fn2, fn3, fn4, fn5, i, len, name, ref, ref1, ref2, ref3, res, source;
  res = {
    query: function() {
      return _query;
    },
    fresh: function() {
      _query.__fresh = true;
      return res;
    },
    clone: function() {
      return ql(_query, def);
    }
  };
  fn1 = function(fn) {
    return res[name] = function() {
      var args;
      args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      _query = fn.apply(null, [_query].concat(slice.call(args)));
      return res;
    };
  };
  for (name in def) {
    fn = def[name];
    fn1(fn);
  }
  for (i = 0, len = builtin.length; i < len; i++) {
    source = builtin[i];
    ref = source.params;
    fn2 = function(name) {
      return res[name] = function(params) {
        _query = ql[name](params, _query);
        return res;
      };
    };
    for (name in ref) {
      _ = ref[name];
      fn2(name);
    }
    ref1 = source.unary;
    fn3 = function(name) {
      return res[name] = function() {
        _query = ql[name](_query);
        return res;
      };
    };
    for (name in ref1) {
      _ = ref1[name];
      fn3(name);
    }
    ref2 = source.binary;
    fn4 = function(name) {
      return res[name] = function(right) {
        _query = ql[name](_query, right);
        return res;
      };
    };
    for (name in ref2) {
      _ = ref2[name];
      fn4(name);
    }
    ref3 = source.trinary;
    fn5 = function(name) {
      return res[name] = function(left, right) {
        _query = ql[name](_query, left, right);
        return res;
      };
    };
    for (name in ref3) {
      _ = ref3[name];
      fn5(name);
    }
  }
  return res;
};

ql.use = function(def) {
  var extra, fn, name, res;
  extra = {};
  res = function(query) {
    return ql(query, def);
  };
  for (name in ql) {
    fn = ql[name];
    res[name] = fn;
  }
  res.use = function(def) {
    for (name in def) {
      fn = def[name];
      extra[name] = fn;
    }
    return res;
  };
  return res.use(def);
};

for (i = 0, len = builtin.length; i < len; i++) {
  source = builtin[i];
  ref = source.params;
  fn1 = function(name) {
    return ql[name] = function(params, source) {
      return {
        __query: name,
        __params: params,
        __source: source
      };
    };
  };
  for (name in ref) {
    _ = ref[name];
    fn1(name);
  }
  ref1 = source.unary;
  fn2 = function(name) {
    return ql[name] = function(source) {
      return {
        __query: name,
        __source: source
      };
    };
  };
  for (name in ref1) {
    _ = ref1[name];
    fn2(name);
  }
  ref2 = source.binary;
  fn3 = function(name) {
    return ql[name] = function(left, right) {
      return {
        __query: name,
        __left: left,
        __right: right
      };
    };
  };
  for (name in ref2) {
    _ = ref2[name];
    fn3(name);
  }
  ref3 = source.trinary;
  fn4 = function(name) {
    return ql[name] = function(params, left, right) {
      return {
        __query: name,
        __params: params,
        __left: left,
        __right: right
      };
    };
  };
  for (name in ref3) {
    _ = ref3[name];
    fn4(name);
  }
}

ql.desc = require('./ql/desc');

ql.merge = require('./ql/merge');

ql.split = require('./ql/split');

ql.diff = require('./ql/diff');

ql.build = require('./ql/build');

ql.exec = require('./ql/exec');

module.exports = ql;
